Testing data pipeline with 5% subset...

============================================================
BUILDING DATA PIPELINE
============================================================

[1/3] Scanning dataset and building slice index...
[SUBSET] Using 10/203 patients (5%)

[INDEX] Slice index built:
  Total valid slices: 5364
  Tumor slices:       2676 (49.9%)
  Non-tumor slices:   2688 (50.1%)
  Skipped empty:      1146

[2/3] Splitting by patient ID...

[SPLIT] Patient-level split (no leakage):
  Train: 8 patients, 4471 slices
  Val:   1 patients, 143 slices
  Test:  1 patients, 750 slices

[3/3] Creating DataLoaders...

[READY] DataLoaders created:
  Train: 4471 slices, 1117 batches
  Val:   143 slices, 36 batches
  Test:  750 slices, 188 batches
  Batch size: 4
  Workers: 0
  Pin memory: False

Loading first batch...

[BATCH]
  Images shape: torch.Size([4, 4, 256, 256])
  Masks shape:  torch.Size([4, 1, 256, 256])
  Images dtype: torch.float32
  Masks dtype:  torch.float32
  Images range: [-3.7626, 6.5751]
  Masks unique: [0.0, 1.0]
  Tumor pixels in batch: 6611

Data pipeline test PASSED!
